# FILE: shared/keyboards.py (Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø´Ø¯Ù‡)

from telegram import ReplyKeyboardMarkup, KeyboardButton, InlineKeyboardMarkup, InlineKeyboardButton
from config import config

# =============================================================================
#  Ø¨Ø®Ø´ Ú©ÛŒØ¨ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
# =============================================================================

def get_admin_main_menu_keyboard() -> ReplyKeyboardMarkup:
    keyboard = [
        [KeyboardButton("ğŸ‘¤ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†")],
        [KeyboardButton("ğŸ““ Ù…Ø¯ÛŒØ±ÛŒØª ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§"), KeyboardButton("âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ùˆ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§")],
        [KeyboardButton("ğŸ“¨ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…"), KeyboardButton("ğŸ’» ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ")],
        [KeyboardButton("ğŸ“š ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¢Ù…ÙˆØ²Ø´")]
    ]
    return ReplyKeyboardMarkup(keyboard, resize_keyboard=True)

def get_user_management_keyboard() -> ReplyKeyboardMarkup:
    keyboard = [
        [KeyboardButton("ğŸ‘¥ Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†"), KeyboardButton("âŒ›ï¸ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ùˆ Ø¨Ù‡ Ø§ØªÙ…Ø§Ù…")],
        [KeyboardButton("ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±"), KeyboardButton("â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±")],
        [KeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ")]
    ]
    return ReplyKeyboardMarkup(keyboard, resize_keyboard=True)

def get_settings_and_tools_keyboard() -> ReplyKeyboardMarkup:
    keyboard = [
        [KeyboardButton("ğŸ” Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ù†Ù„ Ù…Ø±Ø²Ø¨Ø§Ù†")],
        [KeyboardButton("ğŸ”§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø¨Ø§Øª"), KeyboardButton("ğŸ’° ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø§Ù„ÛŒ")],
        [KeyboardButton("ğŸ“£ ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ù†Ø§Ù„ Ú¯Ø²Ø§Ø±Ø´")],
        [KeyboardButton("ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ"), KeyboardButton("ğŸ“Š Ø¢Ù…Ø§Ø± Ø±Ø¨Ø§Øª")],
        [KeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ")]
    ]
    return ReplyKeyboardMarkup(keyboard, resize_keyboard=True)

def get_helper_tools_keyboard() -> ReplyKeyboardMarkup:
    keyboard = [
        [KeyboardButton("âš™ï¸ Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ† Ø±ÙˆØ²Ø§Ù†Ù‡"), KeyboardButton("âš™ï¸ ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ø±Ø¨Ø± Ø§Ù„Ú¯Ùˆ")],
        [KeyboardButton("ğŸ”— Ø§ÛŒØ¬Ø§Ø¯ Ù„ÛŒÙ†Ú© Ø§ØªØµØ§Ù„")],
        [KeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª")]
    ]
    return ReplyKeyboardMarkup(keyboard, resize_keyboard=True)

def get_customer_main_menu_keyboard() -> ReplyKeyboardMarkup:
    keyboard_layout = [
        [KeyboardButton("ğŸ›ï¸ Ù¾Ù†Ù„ Ø®Ø±ÛŒØ¯ Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª")],
        [KeyboardButton("ğŸ“Š Ø³Ø±ÙˆÛŒØ³ Ù…Ù†"), KeyboardButton("ğŸ“± Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§ØªØµØ§Ù„")]
    ]
    if config.SUPPORT_USERNAME:
        keyboard_layout.append([KeyboardButton("ğŸ’¬ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ")])
    return ReplyKeyboardMarkup(keyboard_layout, resize_keyboard=True)

def get_customer_view_for_admin_keyboard() -> ReplyKeyboardMarkup:
    keyboard_layout = [
        [KeyboardButton("ğŸ“Š Ø³Ø±ÙˆÛŒØ³ Ù…Ù†")],
        [KeyboardButton("ğŸ’³ Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©"), KeyboardButton("ğŸ“± Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§ØªØµØ§Ù„")],
        [KeyboardButton("â†©ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†")]
    ]
    if config.SUPPORT_USERNAME:
        keyboard_layout[1].insert(1, KeyboardButton("ğŸ’¬ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ"))
    return ReplyKeyboardMarkup(keyboard_layout, resize_keyboard=True)

def get_notes_management_keyboard() -> ReplyKeyboardMarkup:
    keyboard = [
        [KeyboardButton("ğŸ—’ï¸ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡"), KeyboardButton("ğŸ‘¤ Ø§Ø´ØªØ±Ø§Ú©â€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡")],
        [KeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ")]
    ]
    return ReplyKeyboardMarkup(keyboard, resize_keyboard=True)


# =============================================================================
#  Ø¨Ø®Ø´ Ø¬Ø¯ÛŒØ¯: Ú©ÛŒØ¨ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù¾Ù†Ù„ Ø®Ø±ÛŒØ¯ Ø¯Ù„Ø®ÙˆØ§Ù‡ Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø§Ù„ÛŒ Ø¬Ø¯ÛŒØ¯
# =============================================================================

# FILE: shared/keyboards.py (ÙÙ‚Ø· Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø±Ø§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯)

def get_customer_purchase_menu_keyboard() -> InlineKeyboardMarkup:
    """
    Ú©ÛŒØ¨ÙˆØ±Ø¯ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ù…Ù†ÙˆÛŒ "Ù¾Ù†Ù„ Ø®Ø±ÛŒØ¯ Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª" Ù…Ø´ØªØ±ÛŒ.
    """
    keyboard = [
        [InlineKeyboardButton("ğŸ‘¨â€ğŸ’» Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø±ÛŒØ¯", callback_data="customer_manual_purchase")],
        [
            # --- FIX: Changed callback_data to match the ConversationHandler's entry_point ---
            InlineKeyboardButton("ğŸ’¡ Ø³Ø§Ø®Øª Ù¾Ù„Ù† Ø¯Ù„Ø®ÙˆØ§Ù‡", callback_data="customer_custom_purchase"),
            InlineKeyboardButton("ğŸ§¾ Ø§Ø±Ø³Ø§Ù„ Ø±Ø³ÛŒØ¯ Ù¾Ø±Ø¯Ø§Ø®Øª", callback_data="customer_send_receipt")
        ],
        [InlineKeyboardButton("âœ–ï¸ Ø¨Ø³ØªÙ†", callback_data="close_panel")]
    ]
    return InlineKeyboardMarkup(keyboard)
def get_financial_settings_keyboard() -> ReplyKeyboardMarkup:
    """
    Ú©ÛŒØ¨ÙˆØ±Ø¯ Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ù…Ù†ÙˆÛŒ "ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø§Ù„ÛŒ" Ø§Ø¯Ù…ÛŒÙ†.
    """
    keyboard = [
        [KeyboardButton("ğŸ’³ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª"), KeyboardButton("ğŸ’° ØªÙ†Ø¸ÛŒÙ… Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¯Ù„Ø®ÙˆØ§Ù‡")],
        [KeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª")]
    ]
    return ReplyKeyboardMarkup(keyboard, resize_keyboard=True)

def get_payment_methods_keyboard() -> InlineKeyboardMarkup:
    """
    Ú©ÛŒØ¨ÙˆØ±Ø¯ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø²ÛŒØ±Ù…Ù†ÙˆÛŒ "ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª" Ø§Ø¯Ù…ÛŒÙ†.
    """
    keyboard = [
        [
            InlineKeyboardButton("ğŸ’³ ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ø±Øª Ø¨Ù‡ Ú©Ø§Ø±Øª", callback_data="admin_set_card_info"),
            InlineKeyboardButton("ğŸ…¿ï¸ ØªÙ†Ø¸ÛŒÙ… Ø¯Ø±Ú¯Ø§Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª (Ø¨Ø²ÙˆØ¯ÛŒ)", callback_data="coming_soon")
        ],
        [
            InlineKeyboardButton("â‚¿ ØªÙ†Ø¸ÛŒÙ… Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø§ Ø±Ù…Ø² Ø§Ø±Ø² (Ø¨Ø²ÙˆØ¯ÛŒ)", callback_data="coming_soon")
        ],
        [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø§Ù„ÛŒ", callback_data="back_to_financial_settings")]
    ]
    return InlineKeyboardMarkup(keyboard)